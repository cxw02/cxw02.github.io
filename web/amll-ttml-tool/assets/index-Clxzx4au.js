import{c as bt,u as tt,e as zt,Y as Xe,m as J,d as ye,j as t,J as M,Z as Ae,a as wt,_ as P,$ as ls,f as Kt,a0 as Zt,l as ze,a1 as Be,I as $,G as ve,a2 as as,a3 as st,a4 as lt,a5 as Le,a6 as at,q as je,a7 as Lt,a8 as qt,a9 as Ie,aa as Re,n as Dt,H as is,ab as os,A as Ke,ac as ns,D as $t,ad as cs,ae as rs,af as ms,ag as hs,o as ds,ah as Gt,ai as us,aj as fs,L as Ot,ak as Ve,al as Et,am as gs,an as bs,ao as xs,ap as ps,aq as js,ar as ys,as as As,at as Ts,au as Ls,av as vs,aw as Ss,ax as ws,ay as Ds,az as Ms,aA as _s,aB as Cs,aC as ks,aD as Bs,aE as Ut,aF as Is,aG as Rs,aH as Ps,aI as $s,aJ as Os,aK as Es,aL as Fs,aM as Ws,K as it,aN as Ns,aO as Vs,aP as zs,aQ as vt,aR as Ks,aS as St,aT as Zs,aU as qs,aV as Gs,aW as Us,aX as Js,aY as Ce,aZ as et,a_ as ke,a$ as Ft,b0 as Je,b1 as Hs,b2 as Ys,b3 as Qs,b4 as Xs,W as Me,b5 as el,b6 as Jt,h as tl,b7 as sl,i as ll}from"./index-Bue90L20.js";const al=bt("Add16Regular","16",["M8 2c.28 0 .5.22.5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5c0-.28.22-.5.5-.5Z"]),il=bt("Delete16Regular","16",["M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.56l-1.2 8.84A2.5 2.5 0 0 1 9.74 15h-3.5a2.5 2.5 0 0 1-2.48-2.16L2.57 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6c.28 0 .5.22.5.5v5a.5.5 0 0 1-1 0v-5c0-.28.22-.5.5-.5Zm-4.74 6.7c.1.75.74 1.3 1.49 1.3h3.5a1.5 1.5 0 0 0 1.5-1.3L12.42 4H3.57l1.19 8.7Z"]),Wt=bt("ErrorCircle16Regular","16",["M8 2a6 6 0 1 1 0 12A6 6 0 0 1 8 2Zm0 1a5 5 0 1 0 0 10A5 5 0 0 0 8 3Zm0 7a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm0-5.5a.5.5 0 0 1 .5.41V8.5a.5.5 0 0 1-1 .09V5c0-.28.22-.5.5-.5Z"]),Mt=bt("Info16Regular","16",["M8.5 7.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0v-3Zm.25-2a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1ZM2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8Z"]);function Ht(e,s){return[tt(e),zt(e)]}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const ol=Xe.error,we=J.memo(e=>{const s=ye.c(2);let i;return s[0]!==e.children?(i=t.jsx(M,{color:"gray",size:"2",children:e.children}),s[0]=e.children,s[1]=i):i=s[1],i}),ot=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/importModeAtom",Ae("importFromText.importMode","lyric"));ot.debugLabel="importModeAtom";ot.debugLabel="importModeAtom";const nt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/lineSeparatorModeAtom",Ae("importFromText.lineSeparatorMode","interleaved-line"));nt.debugLabel="lineSeparatorModeAtom";nt.debugLabel="lineSeparatorModeAtom";const ct=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/lineSeparatorAtom",Ae("importFromText.lineSeparator","|"));ct.debugLabel="lineSeparatorAtom";ct.debugLabel="lineSeparatorAtom";const rt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/swapTransAndRomanAtom",Ae("importFromText.swapTransAndRoman",!1));rt.debugLabel="swapTransAndRomanAtom";rt.debugLabel="swapTransAndRomanAtom";const mt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/wordSeparatorAtom",Ae("importFromText.wordSeparator","\\"));mt.debugLabel="wordSeparatorAtom";mt.debugLabel="wordSeparatorAtom";const ht=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/enableSpecialPrefixAtom",Ae("importFromText.enableSpecialPrefix",!1));ht.debugLabel="enableSpecialPrefixAtom";ht.debugLabel="enableSpecialPrefixAtom";const dt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/bgLyricPrefixAtom",Ae("importFromText.bgLyricPrefix","<"));dt.debugLabel="bgLyricPrefixAtom";dt.debugLabel="bgLyricPrefixAtom";const ut=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/duetLyricPrefixAtom",Ae("importFromText.duetLyricPrefix",">"));ut.debugLabel="duetLyricPrefixAtom";ut.debugLabel="duetLyricPrefixAtom";const ft=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/enableEmptyBeatAtom",Ae("importFromText.enableEmptyBeat",!1));ft.debugLabel="enableEmptyBeatAtom";ft.debugLabel="enableEmptyBeatAtom";const gt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/emptyBeatSymbolAtom",Ae("importFromText.emptyBeatSymbol","^"));gt.debugLabel="emptyBeatSymbolAtom";gt.debugLabel="emptyBeatSymbolAtom";const xt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\import-from-text.tsx/textValueAtom",wt(""));xt.debugLabel="textValueAtom";xt.debugLabel="textValueAtom";const nl=J.memo(()=>{const e=ye.c(6),[s,i]=P(xt);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={height:"calc(80vh - 5em)",flex:"1 1 auto",fontFamily:"var(--code-font-family)"},e[0]=n):n=e[0];let o;e[1]!==i?(o=r=>i(r.currentTarget.value),e[1]=i,e[2]=o):o=e[2];let c;return e[3]!==o||e[4]!==s?(c=t.jsx(Zt,{style:n,value:s,onChange:o}),e[3]=o,e[4]=s,e[5]=c):c=e[5],c}),cl=()=>{const e=ye.c(91),[s,i]=P(ls),[n,o]=P(ot),[c,r]=P(nt),[l,x]=P(ct),[a,m]=P(rt),[h,u]=P(mt),[j,D]=P(ht),[A,v]=P(dt),[T,S]=P(ut),[C,H]=P(ft),[f,O]=P(gt),d=Kt();let E;e[0]!==d?(E=be=>{const jt=d.get(ot),Yt=d.get(nt),Qt=d.get(ct),Xt=d.get(rt),Bt=d.get(mt),es=d.get(ht),It=d.get(dt),Rt=d.get(ut),ts=d.get(ft),yt=d.get(gt),Fe=be.split(`
`),qe=[],At=function(ne,Se,We){const xe=ne===void 0?"":ne,Ge="",Ne="";let Te=xe,_e=!1,Ue=!1;if(es)for(;;)if(Te.startsWith(It))_e=!0,Te=Te.slice(It.length);else if(Te.startsWith(Rt))Ue=!0,Te=Te.slice(Rt.length);else break;const Pt={...is(),words:[{...Dt(),word:Te}],translatedLyric:Ge,romanLyric:Ne,isBG:_e,isDuet:Ue};return qe.push(Pt),Pt},ss=function(){for(const ne of Fe)At(ne)},Tt=function(ne,Se){switch(Yt){case"interleaved-line":{let We=1;ne&&We++,Se&&We++;for(let xe=0;xe<Fe.length;xe=xe+We,xe){const Ge=Fe[xe];let Ne=0;const Te=ne?Fe[xe+ ++Ne]:"",_e=Se?Fe[xe+ ++Ne]:"",Ue=At(Ge);ne&&(Ue[ne]=Te),Se&&(Ue[Se]=_e)}return}case"same-line-separator":{for(const We of Fe){const xe=We.split(Qt),Ge=xe[0],Ne=ne?xe[1]:"",Te=Se?xe[2]:"",_e=At(Ge);ne&&(_e[ne]=Ne),Se&&(_e[Se]=Te)}return}}};e:switch(jt){case"lyric":{ss();break e}case"lyric-trans":{Tt("translatedLyric");break e}case"lyric-roman":{Tt("romanLyric");break e}case"lyric-trans-roman":Tt("translatedLyric","romanLyric")}if(Xt)for(const pe of qe){const[ne,Se]=[pe.translatedLyric,pe.romanLyric];pe.romanLyric=ne,pe.translatedLyric=Se}if(Bt.length>0)for(const pe of qe){const ne=pe.words.map(rl).join("");pe.words=ne.split(Bt).map(ml)}if(ts&&yt.length>0)for(const pe of qe)for(const ne of pe.words)for(;ne.word.endsWith(yt);)ne.word=ne.word.slice(0,-yt.length),ne.emptyBeat=ne.emptyBeat+1;d.set(ze,{lyricLines:qe,metadata:[]})},e[0]=d,e[1]=E):E=e[1];const F=E;let k;e[2]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(Be,{style:{flex:"1 1 auto"},children:"导入纯文本歌词"}),e[2]=k):k=e[2];let _;e[3]!==F||e[4]!==i||e[5]!==d?(_=t.jsxs($,{gap:"2",align:"center",mb:"2",children:[k,t.jsx(ve,{onClick:()=>{try{F(d.get(xt)),i(!1)}catch(be){const jt=be;ol("导入纯文本歌词失败，请检查输入的文本是否正确，或者导入设置是否正确"),as(jt)}},children:"导入歌词"})]}),e[3]=F,e[4]=i,e[5]=d,e[6]=_):_=e[6];let V,me;e[7]===Symbol.for("react.memo_cache_sentinel")?(V={initial:"column",sm:"row"},me=t.jsx(nl,{}),e[7]=V,e[8]=me):(V=e[7],me=e[8]);let W,he;e[9]===Symbol.for("react.memo_cache_sentinel")?(W={whiteSpace:"nowrap",flex:"0 0 auto",alignItems:"center",alignContent:"start",textAlign:"end"},he=t.jsx(we,{children:"导入模式"}),e[9]=W,e[10]=he):(W=e[9],he=e[10]);let N;e[11]!==o?(N=be=>o(be),e[11]=o,e[12]=N):N=e[12];let ee;e[13]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(st,{}),e[13]=ee):ee=e[13];let ce;e[14]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsxs(lt,{children:[t.jsx(Le,{value:"lyric",children:"仅歌词"}),t.jsx(Le,{value:"lyric-trans",children:"歌词和翻译歌词"}),t.jsx(Le,{value:"lyric-roman",children:"歌词和音译歌词"}),t.jsx(Le,{value:"lyric-trans-roman",children:"歌词和翻译、音译歌词"})]}),e[14]=ce):ce=e[14];let Y;e[15]!==n||e[16]!==N?(Y=t.jsxs(at,{value:n,onValueChange:N,children:[ee,ce]}),e[15]=n,e[16]=N,e[17]=Y):Y=e[17];let z;e[18]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(we,{children:"歌词分行（翻译和音译）模式"}),e[18]=z):z=e[18];const re=n==="lyric";let oe;e[19]!==r?(oe=be=>r(be),e[19]=r,e[20]=oe):oe=e[20];let te;e[21]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(st,{}),e[21]=te):te=e[21];let ue;e[22]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsxs(lt,{children:[t.jsx(Le,{value:"interleaved-line",children:"多行交错分隔"}),t.jsx(Le,{value:"same-line-separator",children:"同行分隔"})]}),e[22]=ue):ue=e[22];let K;e[23]!==c||e[24]!==re||e[25]!==oe?(K=t.jsxs(at,{disabled:re,value:c,onValueChange:oe,children:[te,ue]}),e[23]=c,e[24]=re,e[25]=oe,e[26]=K):K=e[26];let se;e[27]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(we,{children:"歌词行分隔符"}),e[27]=se):se=e[27];const de=n==="lyric"||c!=="same-line-separator";let B;e[28]!==x?(B=be=>x(be.currentTarget.value),e[28]=x,e[29]=B):B=e[29];let Z;e[30]!==l||e[31]!==de||e[32]!==B?(Z=t.jsx(je,{disabled:de,value:l,onChange:B}),e[30]=l,e[31]=de,e[32]=B,e[33]=Z):Z=e[33];let le;e[34]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(we,{children:"交换翻译行和音译行"}),e[34]=le):le=e[34];let Q;e[35]!==m||e[36]!==a?(Q=t.jsx(Lt,{checked:a,onCheckedChange:m}),e[35]=m,e[36]=a,e[37]=Q):Q=e[37];let q;e[38]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx(we,{children:"单词分隔符"}),e[38]=q):q=e[38];let I;e[39]!==u?(I=be=>u(be.currentTarget.value),e[39]=u,e[40]=I):I=e[40];let ae;e[41]!==I||e[42]!==h?(ae=t.jsx(je,{value:h,onChange:I}),e[41]=I,e[42]=h,e[43]=ae):ae=e[43];let G;e[44]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(we,{children:"启用特殊前缀"}),e[44]=G):G=e[44];let p;e[45]!==j||e[46]!==D?(p=t.jsx(Lt,{checked:j,onCheckedChange:D}),e[45]=j,e[46]=D,e[47]=p):p=e[47];let U;e[48]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(we,{children:"背景歌词前缀"}),e[48]=U):U=e[48];const y=!j;let X;e[49]!==v?(X=be=>v(be.currentTarget.value),e[49]=v,e[50]=X):X=e[50];let g;e[51]!==A||e[52]!==y||e[53]!==X?(g=t.jsx(je,{disabled:y,value:A,onChange:X}),e[51]=A,e[52]=y,e[53]=X,e[54]=g):g=e[54];let b;e[55]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(we,{children:"对唱歌词前缀"}),e[55]=b):b=e[55];const L=!j;let w;e[56]!==S?(w=be=>S(be.currentTarget.value),e[56]=S,e[57]=w):w=e[57];let ie;e[58]!==T||e[59]!==L||e[60]!==w?(ie=t.jsx(je,{disabled:L,value:T,onChange:w}),e[58]=T,e[59]=L,e[60]=w,e[61]=ie):ie=e[61];let ge;e[62]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(we,{children:"启用空拍"}),e[62]=ge):ge=e[62];let fe;e[63]!==C||e[64]!==H?(fe=t.jsx(Lt,{checked:C,onCheckedChange:H}),e[63]=C,e[64]=H,e[65]=fe):fe=e[65];let De;e[66]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx(we,{children:"空拍符号"}),e[66]=De):De=e[66];const Ze=!C;let Pe;e[67]!==O?(Pe=be=>O(be.currentTarget.value),e[67]=O,e[68]=Pe):Pe=e[68];let $e;e[69]!==f||e[70]!==Ze||e[71]!==Pe?($e=t.jsx(je,{disabled:Ze,value:f,onChange:Pe}),e[69]=f,e[70]=Ze,e[71]=Pe,e[72]=$e):$e=e[72];let Oe;e[73]!==Y||e[74]!==K||e[75]!==Z||e[76]!==Q||e[77]!==ae||e[78]!==p||e[79]!==g||e[80]!==ie||e[81]!==fe||e[82]!==$e?(Oe=t.jsxs($,{gap:"4",direction:V,children:[me,t.jsxs(qt,{columns:"2",gapY:"2",gapX:"4",style:W,children:[he,Y,z,K,se,Z,le,Q,q,ae,G,p,U,g,b,ie,ge,fe,De,$e]})]}),e[73]=Y,e[74]=K,e[75]=Z,e[76]=Q,e[77]=ae,e[78]=p,e[79]=g,e[80]=ie,e[81]=fe,e[82]=$e,e[83]=Oe):Oe=e[83];let Ee;e[84]!==_||e[85]!==Oe?(Ee=t.jsx(Ie,{maxWidth:"100%",maxHeight:"100%",children:t.jsxs($,{direction:"column",children:[_,Oe]})}),e[84]=_,e[85]=Oe,e[86]=Ee):Ee=e[86];let He;return e[87]!==s||e[88]!==i||e[89]!==Ee?(He=t.jsx(Re,{open:s,onOpenChange:i,children:Ee}),e[87]=s,e[88]=i,e[89]=Ee,e[90]=He):He=e[90],He};function rl(e){return e.word}function ml(e){return{...Dt(),word:e}}const hl="_metadataTable_1c09v_1",dl="_metadataInput_1c09v_14",ul="_newItemBtnRow_1c09v_17",fl="_newItemLine_1c09v_24",Ye={metadataTable:hl,metadataInput:dl,newItemBtnRow:ul,newItemLine:fl};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const gl=()=>{const e=ye.c(104),[s,i]=P(os),[n,o]=J.useState(""),[c,r]=Ht(ze),{t:l}=Ke();let x,a;e[0]!==l?(a=l("metadataDialog.builtinOptions.musicName","歌曲名称"),e[0]=l,e[1]=a):a=e[1];let m;e[2]!==a?(m={label:a,value:"musicName"},e[2]=a,e[3]=m):m=e[3];let h;e[4]!==l?(h=l("metadataDialog.builtinOptions.artists","歌曲的艺术家"),e[4]=l,e[5]=h):h=e[5];let u;e[6]!==h?(u={label:h,value:"artists"},e[6]=h,e[7]=u):u=e[7];let j;e[8]!==l?(j=l("metadataDialog.builtinOptions.album","歌曲的专辑名"),e[8]=l,e[9]=j):j=e[9];let D;e[10]!==j?(D={label:j,value:"album"},e[10]=j,e[11]=D):D=e[11];let A;e[12]!==l?(A=l("metadataDialog.builtinOptions.ncmMusicId","网易云音乐 ID"),e[12]=l,e[13]=A):A=e[13];let v;e[14]!==A?(v={label:A,value:"ncmMusicId"},e[14]=A,e[15]=v):v=e[15];let T;e[16]!==l?(T=l("metadataDialog.builtinOptions.qqMusicId","QQ 音乐 ID"),e[16]=l,e[17]=T):T=e[17];let S;e[18]!==T?(S={label:T,value:"qqMusicId"},e[18]=T,e[19]=S):S=e[19];let C;e[20]!==l?(C=l("metadataDialog.builtinOptions.spotifyId","Spotify 音乐 ID"),e[20]=l,e[21]=C):C=e[21];let H;e[22]!==C?(H={label:C,value:"spotifyId"},e[22]=C,e[23]=H):H=e[23];let f;e[24]!==l?(f=l("metadataDialog.builtinOptions.appleMusicId","Apple Music 音乐 ID"),e[24]=l,e[25]=f):f=e[25];let O;e[26]!==f?(O={label:f,value:"appleMusicId"},e[26]=f,e[27]=O):O=e[27];let d;e[28]!==l?(d=l("metadataDialog.builtinOptions.isrc","歌曲的 ISRC 号码"),e[28]=l,e[29]=d):d=e[29];let E;e[30]!==d?(E={label:d,value:"isrc"},e[30]=d,e[31]=E):E=e[31];let F;e[32]!==l?(F=l("metadataDialog.builtinOptions.ttmlAuthorGithub","逐词歌词作者 GitHub ID"),e[32]=l,e[33]=F):F=e[33];let k;e[34]!==F?(k={label:F,value:"ttmlAuthorGithub"},e[34]=F,e[35]=k):k=e[35];let _;e[36]!==l?(_=l("metadataDialog.builtinOptions.ttmlAuthorGithubLogin","逐词歌词作者 GitHub 用户名"),e[36]=l,e[37]=_):_=e[37];let V;e[38]!==_?(V={label:_,value:"ttmlAuthorGithubLogin"},e[38]=_,e[39]=V):V=e[39];let me;e[40]!==S||e[41]!==H||e[42]!==O||e[43]!==E||e[44]!==k||e[45]!==m||e[46]!==V||e[47]!==u||e[48]!==D||e[49]!==v?(me=[m,u,D,v,S,H,O,E,k,V],e[40]=S,e[41]=H,e[42]=O,e[43]=E,e[44]=k,e[45]=m,e[46]=V,e[47]=u,e[48]=D,e[49]=v,e[50]=me):me=e[50],x=me;const W=x;let he;e[51]!==W?(he=g=>{const b=W.find(L=>L.value===g);return b?b.label:g},e[51]=W,e[52]=he):he=e[52];const N=he;let ee;e[53]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(Be,{children:"元数据编辑器"}),e[53]=ee):ee=e[53];let ce;e[54]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:"1%"},children:"元数据类型"}),t.jsx("th",{children:"值"})]})}),e[54]=ce):ce=e[54];let Y;e[55]!==c.metadata.length?(Y=c.metadata.length===0&&t.jsx("tr",{style:{height:"4em"},children:t.jsx("td",{colSpan:2,style:{color:"var(--gray-9)",textAlign:"center"},children:"无任何元数据"})}),e[55]=c.metadata.length,e[56]=Y):Y=e[56];let z;if(e[57]!==c.metadata||e[58]!==r||e[59]!==N){let g;e[61]!==r||e[62]!==N?(g=(b,L)=>t.jsxs(J.Fragment,{children:[b.value.map((w,ie)=>t.jsxs("tr",{children:[t.jsx("td",{children:ie===0&&N(b.key)}),t.jsx("td",{children:t.jsxs($,{gap:"1",ml:"2",mt:"1",children:[t.jsx(je,{value:w,className:Ye.metadataInput,onChange:ge=>{const fe=ge.currentTarget.value;r(De=>{De.metadata[L].value[ie]=fe})}}),t.jsx($t,{variant:"soft",onClick:()=>{r(ge=>{ge.metadata[L].value.splice(ie,1),ge.metadata[L].value.length===0&&ge.metadata.splice(L,1)})},children:t.jsx(il,{})})]})})]},`metadata-${b.key}-${ie}`)),t.jsxs("tr",{className:Ye.newItemLine,children:[t.jsx("td",{}),t.jsx("td",{className:Ye.newItemBtnRow,children:t.jsx(ve,{variant:"soft",my:"1",onClick:()=>{r(w=>{w.metadata[L].value.push("")})},children:"添加"})})]})]},`metadata-${b.key}`),e[61]=r,e[62]=N,e[63]=g):g=e[63],z=c.metadata.map(g),e[57]=c.metadata,e[58]=r,e[59]=N,e[60]=z}else z=e[60];let re;e[64]!==Y||e[65]!==z?(re=t.jsxs("table",{className:Ye.metadataTable,children:[ce,t.jsxs("tbody",{children:[Y,z]})]}),e[64]=Y,e[65]=z,e[66]=re):re=e[66];let oe;e[67]===Symbol.for("react.memo_cache_sentinel")?(oe={sm:"row",initial:"column"},e[67]=oe):oe=e[67];let te;e[68]===Symbol.for("react.memo_cache_sentinel")?(te={flex:"1 0 auto"},e[68]=te):te=e[68];let ue;e[69]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(cs,{style:te,children:t.jsxs(ve,{variant:"soft",children:["添加新键值",t.jsx(rs,{})]})}),e[69]=ue):ue=e[69];let K;e[70]===Symbol.for("react.memo_cache_sentinel")?(K={flexGrow:"1"},e[70]=K):K=e[70];let se;e[71]===Symbol.for("react.memo_cache_sentinel")?(se=g=>o(g.currentTarget.value),e[71]=se):se=e[71];let de;e[72]!==n?(de=t.jsx(je,{style:K,placeholder:"自定义键名",value:n,onChange:se}),e[72]=n,e[73]=de):de=e[73];let B;e[74]!==n||e[75]!==r?(B=()=>{r(g=>{const b=g.metadata.find(L=>L.key===n);b?b.value.push(""):g.metadata.push({key:n,value:[""]})})},e[74]=n,e[75]=r,e[76]=B):B=e[76];let Z;e[77]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(al,{}),e[77]=Z):Z=e[77];let le;e[78]!==B?(le=t.jsx($t,{variant:"soft",onClick:B,children:Z}),e[78]=B,e[79]=le):le=e[79];let Q;e[80]!==de||e[81]!==le?(Q=t.jsxs($,{gap:"1",children:[de,le]}),e[80]=de,e[81]=le,e[82]=Q):Q=e[82];let q;e[83]!==W||e[84]!==r?(q=W.map(g=>t.jsx(ns,{shortcut:g.value,onClick:()=>{r(b=>{const L=b.metadata.find(w=>w.key===g.value);L?L.value.push(""):b.metadata.push({key:g.value,value:[""]})})},children:g.label},`builtin-option-${g.value}`)),e[83]=W,e[84]=r,e[85]=q):q=e[85];let I;e[86]!==Q||e[87]!==q?(I=t.jsxs(ms,{children:[ue,t.jsxs(hs,{children:[Q,q]})]}),e[86]=Q,e[87]=q,e[88]=I):I=e[88];let ae;e[89]===Symbol.for("react.memo_cache_sentinel")?(ae={flex:"1 0 auto"},e[89]=ae):ae=e[89];let G;e[90]!==W||e[91]!==r?(G=t.jsx(ve,{style:ae,variant:"soft",onClick:()=>{r(g=>{for(const b of W)g.metadata.find(w=>w.key===b.value)||g.metadata.push({key:b.value,value:[""]})})},children:"一键添加所有预设键"}),e[90]=W,e[91]=r,e[92]=G):G=e[92];let p;e[93]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(ve,{asChild:!0,variant:"soft",children:t.jsxs("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/Steve-xmh/amll-ttml-tool/wiki/%E6%AD%8C%E8%AF%8D%E5%85%83%E6%95%B0%E6%8D%AE",children:[t.jsx(Mt,{}),"了解详情"]})}),e[93]=p):p=e[93];let U;e[94]!==I||e[95]!==G?(U=t.jsxs($,{gap:"1",direction:oe,children:[I,G,p]}),e[94]=I,e[95]=G,e[96]=U):U=e[96];let y;e[97]!==re||e[98]!==U?(y=t.jsxs(Ie,{children:[ee,re,U]}),e[97]=re,e[98]=U,e[99]=y):y=e[99];let X;return e[100]!==s||e[101]!==i||e[102]!==y?(X=t.jsx(Re,{open:s,onOpenChange:i,children:y}),e[100]=s,e[101]=i,e[102]=y,e[103]=X):X=e[103],X},bl="2025-07-06T06:27:43.258Z",Nt="63d24d82ea26d60ed33fadfec45de99b066c75ce";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const xl=()=>{const e=ye.c(24),{t:s}=Ke();let i;e[0]!==s?(i=s("aboutModal.appName","Apple Music-like lyrics TTML Tools"),e[0]=s,e[1]=i):i=e[1];let n;e[2]!==i?(n=t.jsx(M,{as:"div",children:i}),e[2]=i,e[3]=n):n=e[3];let o;e[4]!==s?(o=s("aboutModal.description","一个用于 Apple Music-like lyrics 生态的逐词歌词 TTML 编辑和时间轴工具"),e[4]=s,e[5]=o):o=e[5];let c;e[6]!==o?(c=t.jsx(M,{as:"div",size:"2",mb:"4",children:o}),e[6]=o,e[7]=c):c=e[7];let r;e[8]!==s?(r=s("aboutModal.buildDate","构建日期：{date}",{date:bl}),e[8]=s,e[9]=r):r=e[9];let l;e[10]!==r?(l=t.jsx(M,{as:"div",size:"2",color:"gray",children:r}),e[10]=r,e[11]=l):l=e[11];let x;e[12]!==s?(x=t.jsx(ve,{asChild:!0,variant:"ghost",children:t.jsx("a",{href:`https://github.com/Steve-xmh/amll-ttml-tool/commit/${Nt}`,target:"_blank",rel:"noreferrer",children:Nt})}),e[12]=s,e[13]=x):x=e[13];let a;e[14]!==s||e[15]!==x?(a=s("aboutModal.gitCommit","Git 提交：{commit}",{commit:x}),e[14]=s,e[15]=x,e[16]=a):a=e[16];let m;e[17]!==a?(m=t.jsx(M,{as:"div",size:"2",color:"gray",children:a}),e[17]=a,e[18]=m):m=e[18];let h;return e[19]!==n||e[20]!==c||e[21]!==l||e[22]!==m?(h=t.jsxs(t.Fragment,{children:[n,c,l,m]}),e[19]=n,e[20]=c,e[21]=l,e[22]=m,e[23]=h):h=e[23],h};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const pl=()=>{const e=ye.c(118),[s,i]=P(ds),[n,o]=P(Gt),[c,r]=P(us),[l,x]=P(fs),{t:a}=Ke();let m;e[0]!==a?(m=a("settings.common.layoutMode","编辑布局模式"),e[0]=a,e[1]=m):m=e[1];let h;e[2]!==m?(h=t.jsx(M,{children:m}),e[2]=m,e[3]=h):h=e[3];let u;e[4]!==a?(u=a("settings.common.layoutModeDesc.line1","简单布局能够满足大部分使用者的基本需求"),e[4]=a,e[5]=u):u=e[5];let j;e[6]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx("br",{}),e[6]=j):j=e[6];let D;e[7]!==a?(D=a("settings.common.layoutModeDesc.line2","如果你需要更加高效的打轴的话，可以考虑切换到高级模式"),e[7]=a,e[8]=D):D=e[8];let A;e[9]!==u||e[10]!==D?(A=t.jsxs(M,{size:"1",color:"gray",children:[u,j,D]}),e[9]=u,e[10]=D,e[11]=A):A=e[11];let v;e[12]!==i?(v=fe=>i(fe),e[12]=i,e[13]=v):v=e[13];let T;e[14]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(st,{}),e[14]=T):T=e[14];let S;e[15]!==a?(S=a("settings.common.layoutModeOptions.simple","简单模式"),e[15]=a,e[16]=S):S=e[16];let C;e[17]!==S?(C=t.jsx(Le,{value:Ot.Simple,children:S}),e[17]=S,e[18]=C):C=e[18];let H;e[19]!==a?(H=a("settings.common.layoutModeOptions.advance","高级模式"),e[19]=a,e[20]=H):H=e[20];let f;e[21]!==H?(f=t.jsx(Le,{value:Ot.Advance,children:H}),e[21]=H,e[22]=f):f=e[22];let O;e[23]!==f||e[24]!==C?(O=t.jsxs(lt,{children:[C,f]}),e[23]=f,e[24]=C,e[25]=O):O=e[25];let d;e[26]!==s||e[27]!==O||e[28]!==v?(d=t.jsxs(at,{value:s,onValueChange:v,children:[T,O]}),e[26]=s,e[27]=O,e[28]=v,e[29]=d):d=e[29];let E;e[30]!==h||e[31]!==d||e[32]!==A?(E=t.jsx(M,{as:"label",children:t.jsxs($,{direction:"column",gap:"2",align:"start",children:[h,A,d]})}),e[30]=h,e[31]=d,e[32]=A,e[33]=E):E=e[33];let F;e[34]!==a?(F=a("settings.common.syncJudgeMode","打轴时间戳判定模式"),e[34]=a,e[35]=F):F=e[35];let k;e[36]!==F?(k=t.jsx(M,{children:F}),e[36]=F,e[37]=k):k=e[37];let _;e[38]!==a?(_=a("settings.common.syncJudgeModeDesc",'设置打轴时间戳的判定模式，默认为"首个按键按下时间"。'),e[38]=a,e[39]=_):_=e[39];let V;e[40]!==_?(V=t.jsx(M,{size:"1",color:"gray",children:_}),e[40]=_,e[41]=V):V=e[41];let me;e[42]!==o?(me=fe=>o(fe),e[42]=o,e[43]=me):me=e[43];let W;e[44]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(st,{}),e[44]=W):W=e[44];let he;e[45]!==a?(he=a("settings.common.syncJudgeModeOptions.firstKeyDown","首个按键按下时间"),e[45]=a,e[46]=he):he=e[46];let N;e[47]!==he?(N=t.jsx(Le,{value:Ve.FirstKeyDownTime,children:he}),e[47]=he,e[48]=N):N=e[48];let ee;e[49]!==a?(ee=a("settings.common.syncJudgeModeOptions.lastKeyUp","最后一个按键抬起时间"),e[49]=a,e[50]=ee):ee=e[50];let ce;e[51]!==ee?(ce=t.jsx(Le,{value:Ve.LastKeyUpTime,children:ee}),e[51]=ee,e[52]=ce):ce=e[52];let Y;e[53]!==a?(Y=a("settings.common.syncJudgeModeOptions.middleKey","取按键按下和抬起的中间值"),e[53]=a,e[54]=Y):Y=e[54];let z;e[55]!==Y?(z=t.jsx(Le,{value:Ve.MiddleKeyTime,children:Y}),e[55]=Y,e[56]=z):z=e[56];let re;e[57]!==N||e[58]!==ce||e[59]!==z?(re=t.jsxs(lt,{children:[N,ce,z]}),e[57]=N,e[58]=ce,e[59]=z,e[60]=re):re=e[60];let oe;e[61]!==n||e[62]!==me||e[63]!==re?(oe=t.jsxs(at,{value:n,onValueChange:me,children:[W,re]}),e[61]=n,e[62]=me,e[63]=re,e[64]=oe):oe=e[64];let te;e[65]!==k||e[66]!==V||e[67]!==oe?(te=t.jsx(M,{as:"label",children:t.jsxs($,{direction:"column",gap:"2",my:"3",align:"start",children:[k,V,oe]})}),e[65]=k,e[66]=V,e[67]=oe,e[68]=te):te=e[68];let ue;e[69]===Symbol.for("react.memo_cache_sentinel")?(ue={alignSelf:"stretch"},e[69]=ue):ue=e[69];let K;e[70]!==a?(K=a("settings.common.volume","音乐音量"),e[70]=a,e[71]=K):K=e[71];let se;e[72]!==K?(se=t.jsx(M,{children:K}),e[72]=K,e[73]=se):se=e[73];const de=c*100;let B;e[74]!==de?(B=de.toFixed(),e[74]=de,e[75]=B):B=e[75];let Z;e[76]!==B?(Z=t.jsxs(M,{wrap:"nowrap",color:"gray",size:"1",children:[B,"%"]}),e[76]=B,e[77]=Z):Z=e[77];let le;e[78]!==se||e[79]!==Z?(le=t.jsxs($,{align:"center",justify:"between",style:ue,children:[se,Z]}),e[78]=se,e[79]=Z,e[80]=le):le=e[80];let Q;e[81]!==c?(Q=[c],e[81]=c,e[82]=Q):Q=e[82];let q;e[83]!==r?(q=fe=>r(fe[0]),e[83]=r,e[84]=q):q=e[84];let I;e[85]!==Q||e[86]!==q?(I=t.jsx(Et,{min:0,max:1,defaultValue:Q,step:.01,onValueChange:q}),e[85]=Q,e[86]=q,e[87]=I):I=e[87];let ae;e[88]!==le||e[89]!==I?(ae=t.jsxs($,{direction:"column",gap:"2",my:"3",align:"start",children:[le,I]}),e[88]=le,e[89]=I,e[90]=ae):ae=e[90];let G;e[91]===Symbol.for("react.memo_cache_sentinel")?(G={alignSelf:"stretch"},e[91]=G):G=e[91];let p;e[92]!==a?(p=a("settings.common.playbackRate","播放速度"),e[92]=a,e[93]=p):p=e[93];let U;e[94]!==p?(U=t.jsx(M,{wrap:"nowrap",children:p}),e[94]=p,e[95]=U):U=e[95];let y;e[96]!==l?(y=l.toFixed(2),e[96]=l,e[97]=y):y=e[97];let X;e[98]!==y?(X=t.jsxs(M,{wrap:"nowrap",color:"gray",size:"1",children:[y,"x"]}),e[98]=y,e[99]=X):X=e[99];let g;e[100]!==U||e[101]!==X?(g=t.jsxs($,{align:"center",justify:"between",style:G,children:[U,X]}),e[100]=U,e[101]=X,e[102]=g):g=e[102];let b;e[103]!==l?(b=[l],e[103]=l,e[104]=b):b=e[104];let L;e[105]!==x?(L=fe=>x(fe[0]),e[105]=x,e[106]=L):L=e[106];let w;e[107]!==b||e[108]!==L?(w=t.jsx(Et,{min:.05,max:2,defaultValue:b,step:.05,onValueChange:L}),e[107]=b,e[108]=L,e[109]=w):w=e[109];let ie;e[110]!==g||e[111]!==w?(ie=t.jsxs($,{direction:"column",gap:"2",my:"3",align:"start",children:[g,w]}),e[110]=g,e[111]=w,e[112]=ie):ie=e[112];let ge;return e[113]!==E||e[114]!==te||e[115]!==ae||e[116]!==ie?(ge=t.jsxs(t.Fragment,{children:[E,te,ae,ie]}),e[113]=E,e[114]=te,e[115]=ae,e[116]=ie,e[117]=ge):ge=e[117],ge};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const R=(e,s)=>({atom:e,label:s}),jl=[R(gs,"新建文件"),R(bs,"打开文件"),R(xs,"保存文件"),R(ps,"打开音频文件"),R(js,"撤销"),R(ys,"重做"),R(As,"全选"),R(Ts,"反选"),R(Ls,"选中同类单词"),R(vs,"删除所选"),R(Ss,"模式切换 - 切换到编辑模式"),R(ws,"模式切换 - 切换到打轴模式"),R(Ds,"模式切换 - 切换到预览模式"),R(Ms,"打轴 - 移动到下一个单词"),R(_s,"打轴 - 移动到上一个单词"),R(Cs,"打轴 - 移动到下一行开头"),R(ks,"打轴 - 移动到上一行开头"),R(Bs,"打轴 - 初始打轴"),R(Ut,"打轴 - 步进打轴"),R(Is,"打轴 - 间奏打轴"),R(Rs,"播放 - 暂停/继续播放"),R(Ps,"播放 - 快进 5 秒"),R($s,"播放 - 快退 5 秒"),R(Os,"播放 - 调高音量"),R(Es,"播放 - 调低音量"),R(Fs,"播放 - 增加播放速度"),R(Ws,"播放 - 降低播放速度")],yl=({entry:e})=>{const[s,i]=P(e.atom),[n,o]=J.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(it,{children:e.label}),t.jsx(it,{children:t.jsx(je,{onClick:async()=>{try{o(!0);const c=await Vs();i(c)}catch{}finally{o(!1)}},size:"1",value:n?"请按下按键...":Ns(s),readOnly:!0})})]})},Al=()=>{const e=ye.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx(qt,{columns:"2",gapY:"2",children:jl.map(Tl)}),e[0]=s):s=e[0],s};function Tl(e){return t.jsx(yl,{entry:e},e.label)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const Ll=J.memo(()=>{const e=ye.c(32),[s,i]=P(zs),{t:n}=Ke();let o;e[0]!==n?(o=n("settingsDialog.title","首选项"),e[0]=n,e[1]=o):o=e[1];let c;e[2]!==o?(c=t.jsx(Be,{children:o}),e[2]=o,e[3]=c):c=e[3];let r;e[4]!==n?(r=n("settingsDialog.tab.common","常规"),e[4]=n,e[5]=r):r=e[5];let l;e[6]!==r?(l=t.jsx(vt,{value:"common",children:r}),e[6]=r,e[7]=l):l=e[7];let x;e[8]!==n?(x=n("settingsDialog.tab.keybindings","按键绑定"),e[8]=n,e[9]=x):x=e[9];let a;e[10]!==x?(a=t.jsx(vt,{value:"keybinding",children:x}),e[10]=x,e[11]=a):a=e[11];let m;e[12]!==n?(m=n("common.about","关于"),e[12]=n,e[13]=m):m=e[13];let h;e[14]!==m?(h=t.jsx(vt,{value:"about",children:m}),e[14]=m,e[15]=h):h=e[15];let u;e[16]!==l||e[17]!==a||e[18]!==h?(u=t.jsxs(Ks,{children:[l,a,h]}),e[16]=l,e[17]=a,e[18]=h,e[19]=u):u=e[19];let j;e[20]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(St,{value:"common",children:t.jsx(pl,{})}),e[20]=j):j=e[20];let D;e[21]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(St,{value:"keybinding",children:t.jsx(Al,{})}),e[21]=D):D=e[21];let A;e[22]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsxs(it,{pt:"3",children:[j,D,t.jsx(St,{value:"about",children:t.jsx(xl,{})})]}),e[22]=A):A=e[22];let v;e[23]!==u?(v=t.jsxs(Zs,{children:[u,A]}),e[23]=u,e[24]=v):v=e[24];let T;e[25]!==c||e[26]!==v?(T=t.jsxs(Ie,{children:[c,v]}),e[25]=c,e[26]=v,e[27]=T):T=e[27];let S;return e[28]!==i||e[29]!==s||e[30]!==T?(S=t.jsx(Re,{open:s,onOpenChange:i,children:T}),e[28]=i,e[29]=s,e[30]=T,e[31]=S):S=e[31],S});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const _t=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\submit-to-amll-db.tsx/uploadDbTypeAtom",Ae("uploadDbType","official"));_t.debugLabel="uploadDbTypeAtom";_t.debugLabel="uploadDbTypeAtom";const pt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\submit-to-amll-db.tsx/metadataAtom",wt(e=>e(ze).metadata));pt.debugLabel="metadataAtom";pt.debugLabel="metadataAtom";const Ct=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\submit-to-amll-db.tsx/issuesAtom",wt(e=>{const s=[],i=e(pt);i.findIndex(o=>o.key==="musicName"&&o.value.length>0)===-1&&s.push("元数据缺少音乐名称"),i.findIndex(o=>o.key==="artists"&&o.value.length>0)===-1&&s.push("元数据缺少音乐作者"),i.findIndex(o=>o.key==="album"&&o.value.length>0)===-1&&s.push("元数据缺少音乐专辑名称");const n=new Set(["ncmMusicId","qqMusicId","spotifyId","appleMusicId"]);return i.findIndex(o=>n.has(o.key)&&o.value.length>0)===-1&&s.push("元数据缺少音乐平台对应歌曲 ID"),s}));Ct.debugLabel="issuesAtom";Ct.debugLabel="issuesAtom";const vl=(e,s)=>{const i=[];return e.find(l=>l.key==="musicName")?.value?.length||i.push(s("submitToAMLLDB.validation.missingMusicName","元数据缺少音乐名称")),e.find(l=>l.key==="artists")?.value?.length||i.push(s("submitToAMLLDB.validation.missingArtists","元数据缺少音乐作者")),e.find(l=>l.key==="album")?.value?.length||i.push(s("submitToAMLLDB.validation.missingAlbum","元数据缺少音乐专辑名称")),[e.find(l=>l.key==="ncmMusicId"),e.find(l=>l.key==="qqMusicId"),e.find(l=>l.key==="spotifyId"),e.find(l=>l.key==="appleMusicId"),e.find(l=>l.key==="isrc")].some(l=>l?.value?.length)||i.push(s("submitToAMLLDB.validation.missingMusicId","元数据缺少音乐平台对应歌曲 ID")),i},Sl=J.memo(()=>{const{t:e}=Ke(),[s,i]=P(_t),[n,o]=P(qs),[c,r]=P(Gs),[l,x]=P(Us),a=tt(pt),m=tt(Ct),[h,u]=J.useState(""),[j,D]=J.useState(""),[A,v]=J.useState(!1),[T,S]=J.useState(e("submitToAMLLDB.defaultReason","新歌词提交")),C=Kt(),H=J.useCallback(async()=>{if(!A){v(!0);try{const f=vl(a,e);if(f.length>0){Xe.error(e("submitToAMLLDB.errors.validation",`提交验证失败：
{{errors}}`,{errors:f.join(`
`)}));return}if(C.get(ze).lyricLines.length===0){Xe.error(e("submitToAMLLDB.errors.noLyrics","歌词还什么都没有呢？"));return}const O=Js(C.get(ze)),d=new Blob([O],{type:"text/xml"}),E=new FormData;E.append("file",d,"lyrics.ttml");const F=await fetch("https://amll-ttml-db.stevexmh.com/api/upload",{method:"POST",body:E});if(!F.ok)throw new Error(e("submitToAMLLDB.errors.uploadFailed","发送上传歌词文件请求失败：{{status}} {{statusText}}",{status:F.status,statusText:F.statusText}));const k=await F.json(),_=new URL("https://github.com/Steve-xmh/amll-ttml-lyrics/issues/new");_.searchParams.append("labels",e("submitToAMLLDB.labels.submit","歌词提交/补正")),_.searchParams.append("title",e("submitToAMLLDB.issueTitle","[歌词提交/修正] {{name}}",{name:h})),_.searchParams.append("body",`${T}
${j}
<!-- AMLL TTML DB File ID: ${k.id} -->`),open(_.toString()),o(!1)}catch(f){console.error(f),Xe.error(e("submitToAMLLDB.errors.submitFailed","提交发生错误，请查看控制台确认原因！"))}v(!1)}},[C,h,T,j,o,e]);return J.useLayoutEffect(()=>{if(l){const f=a.find(d=>d.key==="musicName")?.value?.join(", ")??e("submitToAMLLDB.unknownTitle","未知曲名"),O=a.find(d=>d.key==="artists")?.value?.join(", ")??e("submitToAMLLDB.unknownArtist","未知歌手");u(`${O} - ${f}`)}},[l,a,e]),t.jsx(Re,{open:n,onOpenChange:o,children:t.jsxs(Ie,{"aria-description":e("submitToAMLLDB.description","提交歌词到 AMLL 歌词数据库"),children:[t.jsx(Be,{children:e("submitToAMLLDB.title","提交歌词到 AMLL 歌词数据库（仅简体中文用户）")}),t.jsxs($,{direction:"column",gap:"4",children:[!c&&t.jsxs(t.Fragment,{children:[t.jsxs(Ce,{color:"orange",children:[t.jsx(et,{children:t.jsx(Wt,{})}),t.jsx(ke,{children:e("submitToAMLLDB.chineseOnlyWarning","本功能仅使用 AMLL 歌词数据库的简体中文用户可用，如果您是为了在其他软件上使用歌词而编辑歌词的话，请参考对应的软件提交歌词的方式来提交歌词哦！")})]}),t.jsxs(Ce,{color:"blue",children:[t.jsx(et,{children:t.jsx(Mt,{})}),t.jsx(ke,{children:t.jsxs("p",{children:[e("submitToAMLLDB.thankYou","首先，感谢您的慷慨歌词贡献！"),t.jsx("br",{}),e("submitToAMLLDB.cc0Agreement","通过提交，你将默认同意")," ",t.jsx(M,{weight:"bold",color:"orange",children:e("submitToAMLLDB.cc0Rights","使用 CC0 共享协议完全放弃歌词所有权")}),e("submitToAMLLDB.andSubmit","并提交到歌词数据库！"),t.jsx("br",{}),e("submitToAMLLDB.futureUse","并且歌词将会在以后被 AMLL 系程序作为默认 TTML 歌词源获取！"),t.jsx("br",{}),e("submitToAMLLDB.rightsWarning","如果您对歌词所有权比较看重的话，请勿提交歌词哦！"),t.jsx("br",{}),e("submitToAMLLDB.submitInstructions","请输入以下提交信息然后跳转到 Github 议题提交页面！")]})})]}),t.jsx(ve,{variant:"soft",size:"1",onClick:()=>r(!0),children:e("submitToAMLLDB.closeWarning","关闭上述警告信息")})]}),t.jsxs($,{justify:"between",gap:"4",align:"center",children:[t.jsx(it,{flexShrink:"0",children:t.jsx(M,{as:"label",size:"2",children:t.jsxs($,{direction:"column",gap:"2",children:["歌词库类型",t.jsxs(Ft,{value:s,onValueChange:f=>i(f),children:[t.jsx(Je,{value:"official",children:"官方歌词库"}),t.jsx(Je,{value:"user",children:"用户歌词库"}),t.jsx(Je,{value:"both",children:"全部歌词库"})]})]})})}),t.jsxs($,{direction:"column",children:[s==="official"&&t.jsx(Ce,{color:"grass",children:t.jsxs(ke,{size:"1",children:["提交到官方歌词库，需要进行人工审核，确保歌词满足基本要求以及时间轴和效果后方可加入词库。",t.jsx("br",{}),"此举可以把关你的歌词质量，让你的歌词能以足够好的演出效果呈现，推荐提交到此处。"]})}),s==="user"&&t.jsx(Ce,{color:"orange",children:t.jsxs(ke,{size:"1",children:["提交到用户歌词库，仅需通过机器人审核没有严重问题后即可加入词库，无需人工审核。",t.jsx("br",{}),"但是如果出现歌词内容以及呈现效果的问题则只能通过重新提交覆盖，无法进行人工核对保证质量。"]})}),s==="both"&&t.jsx(Ce,{color:"orange",children:t.jsxs(ke,{size:"1",children:["两个都要也不坏，知晓情况即可",t.jsx("br",{}),"上传后将会分别打开每个仓库对应的提交页面，请手动分别按下创建议题即可提交。"]})})]})]}),t.jsx(M,{as:"label",size:"2",children:t.jsxs($,{gap:"2",children:[t.jsx(Hs,{checked:l,onCheckedChange:f=>x(!!f)}),"从元数据中生成"]})}),t.jsx(M,{as:"label",size:"2",children:t.jsxs($,{direction:"column",gap:"2",children:["音乐名称",t.jsx(je,{value:h,disabled:l,onChange:f=>u(f.currentTarget.value)}),"推荐使用 歌手 - 歌曲 格式，方便仓库管理员确认你的歌曲是否存在"]})}),t.jsx(M,{as:"label",size:"2",children:t.jsxs($,{direction:"column",gap:"2",children:["提交缘由",t.jsxs(Ft,{value:T,onValueChange:S,children:[t.jsx(Je,{value:"新歌词提交",children:"新歌词提交"}),t.jsx(Je,{value:"修正已有歌词",children:"修正已有歌词"})]})]})}),t.jsx(M,{as:"label",size:"2",children:t.jsxs($,{direction:"column",gap:"2",children:["备注",t.jsx(Zt,{resize:"vertical",placeholder:"有什么需要补充说明的呢？",value:j,onChange:f=>D(f.currentTarget.value)})]})}),m.length>0&&t.jsxs(Ce,{color:"red",children:[t.jsx(et,{children:t.jsx(Wt,{})}),t.jsxs(ke,{children:["发现以下问题，请修正后再提交：",t.jsx("ul",{children:m.map(f=>t.jsx("li",{children:f},f))})]})]}),t.jsx(ve,{loading:A,disabled:m.length>0,onClick:H,children:"上传歌词并创建议题"})]})]})})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const Qe=e=>{const s=ye.c(2),{enable:i}=e,n=i?"var(--accent-11)":"var(--accent-a5)";let o;return s[0]!==n?(o=t.jsx("div",{style:{width:"2em",height:"2em",borderRadius:"50%",boxShadow:"var(--shadow-2)",backgroundColor:n}}),s[0]=n,s[1]=o):o=s[1],o},wl=J.memo(()=>{const e=ye.c(57),[s,i]=P(Ys),[n,o]=P(Qs),[c,r]=J.useState(!1),[l,x]=J.useState(-1),[a,m]=J.useState(null),h=tt(Gt),u=J.useRef(0),j=J.useRef(0);let D;e[0]===Symbol.for("react.memo_cache_sentinel")?(D=[],e[0]=D):D=e[0];const A=J.useRef(D),v=J.useRef(null),T=1e3/(n/60);let S,C;e[1]!==T||e[2]!==s||e[3]!==c?(S=()=>{if(!c||!s){x(-1);return}m(null);let G;G=!1;const p=v.current;if(!p)return;p.width=p.clientWidth*window.devicePixelRatio,p.height=p.clientHeight*window.devicePixelRatio;const U=(p.width-2*window.devicePixelRatio)/2,y=p.getContext("2d");if(y)return A.current=[],(async()=>{const X=Dl,g=Ml;let b=0;const L=T/1e3;j.current=Me.ctxCurrentTime,u.current=j.current,Me.playNode(X(),j.current,j.current+.05),x(0);let w=null;for(;!G;){const ie=Me.ctxCurrentTime;ie>=u.current&&(x(b),w=++b%4===0?X():g(),b=b%4,j.current=u.current,u.current=ie+L,Me.playNode(w,u.current,u.current+.05)),y.clearRect(0,0,p.width,p.height),y.fillStyle="rgba(255, 0, 0, 0.1)";for(const De of A.current){const Ze=De/L*p.width;y.fillRect(U+Ze,0,2*window.devicePixelRatio,p.height)}y.fillStyle="green",y.fillRect(U,0,2*window.devicePixelRatio,p.height);const ge=(j.current-ie)/L;y.fillStyle="yellow",y.fillRect(U+ge*p.width,0,window.devicePixelRatio,p.height);const fe=(u.current-ie)/L;y.fillStyle="yellow",y.fillRect(U+fe*p.width,0,window.devicePixelRatio,p.height),await new Promise(_l)}w?.stop()})(),()=>{G=!0}},C=[c,s,T],e[1]=T,e[2]=s,e[3]=c,e[4]=S,e[5]=C):(S=e[4],C=e[5]),J.useEffect(S,C);let H;e[6]!==c||e[7]!==h?(H=G=>{if(!c)return;const p=Me.ctxCurrentTime,U=Me.ctxOutputLatency;let y=p+U;e:switch(h){case Ve.FirstKeyDownTime:{y=y-G.downTimeOffset/1e3;break e}case Ve.LastKeyUpTime:break e;case Ve.MiddleKeyTime:y=y-G.downTimeOffset/2e3}const X=j.current-y,g=u.current-y;let b;b=0,Math.abs(X)<Math.abs(g)?b=X:b=g,A.current.push(b),A.current.length>100&&A.current.shift(),m(L=>{const w=b*1e3|0;return L===null?{cur:w,min:w,max:w}:{cur:w,min:Math.min(L.min,w),max:Math.max(L.max,w)}})},e[6]=c,e[7]=h,e[8]=H):H=e[8];let f;e[9]!==c?(f=[c],e[9]=c,e[10]=f):f=e[10],Xs(Ut,H,f);let O;e[11]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(Be,{children:"打轴延迟测试"}),e[11]=O):O=e[11];let d;e[12]===Symbol.for("react.memo_cache_sentinel")?(d=t.jsx(M,{children:"请选择自己喜欢的 BPM，并在每个蜂鸣声响起时按下打轴按键，以测量音频/输入延迟差"}),e[12]=d):d=e[12];let E;e[13]===Symbol.for("react.memo_cache_sentinel")?(E={alignSelf:"center"},e[13]=E):E=e[13];const F=l===0;let k;e[14]!==F?(k=t.jsx(Qe,{enable:F}),e[14]=F,e[15]=k):k=e[15];const _=l===1;let V;e[16]!==_?(V=t.jsx(Qe,{enable:_}),e[16]=_,e[17]=V):V=e[17];const me=l===2;let W;e[18]!==me?(W=t.jsx(Qe,{enable:me}),e[18]=me,e[19]=W):W=e[19];const he=l===3;let N;e[20]!==he?(N=t.jsx(Qe,{enable:he}),e[20]=he,e[21]=N):N=e[21];let ee;e[22]!==V||e[23]!==W||e[24]!==N||e[25]!==k?(ee=t.jsxs($,{gap:"6",my:"6",style:E,children:[k,V,W,N]}),e[22]=V,e[23]=W,e[24]=N,e[25]=k,e[26]=ee):ee=e[26];let ce;e[27]===Symbol.for("react.memo_cache_sentinel")?(ce={alignSelf:"center"},e[27]=ce):ce=e[27];const Y=a===null?"最快延迟":`${a.max}ms`;let z;e[28]!==Y?(z=t.jsx(M,{children:Y}),e[28]=Y,e[29]=z):z=e[29];const re=a===null?"gray":a.cur>0?"blue":a.cur<0?"red":"green",oe=a===null?"未测量":a.cur>0?`快 ${a.cur}ms`:a.cur<0?`慢 ${a.cur}ms`:"完美 0ms";let te;e[30]!==re||e[31]!==oe?(te=t.jsx(M,{color:re,children:oe}),e[30]=re,e[31]=oe,e[32]=te):te=e[32];const ue=a===null?"最慢延迟":`${-a.min}ms`;let K;e[33]!==ue?(K=t.jsx(M,{children:ue}),e[33]=ue,e[34]=K):K=e[34];let se;e[35]!==z||e[36]!==te||e[37]!==K?(se=t.jsxs($,{gap:"4",style:ce,children:[z,te,K]}),e[35]=z,e[36]=te,e[37]=K,e[38]=se):se=e[38];let de;e[39]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("canvas",{style:{width:"14em",height:"1em",margin:"1em",borderRadius:"var(--radius-2)",boxShadow:"var(--shadow-2)",alignSelf:"center"},ref:v}),e[39]=de):de=e[39];let B;e[40]!==o?(B=G=>o(G.target.valueAsNumber),e[40]=o,e[41]=B):B=e[41];let Z;e[42]!==n||e[43]!==B?(Z=t.jsx(M,{as:"label",size:"2",children:t.jsxs($,{direction:"column",gap:"2",children:["节拍 BPM",t.jsx(je,{type:"number",min:60,max:320,value:n,onChange:B})]})}),e[42]=n,e[43]=B,e[44]=Z):Z=e[44];let le;e[45]===Symbol.for("react.memo_cache_sentinel")?(le=()=>r(Cl),e[45]=le):le=e[45];const Q=c?"结束":"开始";let q;e[46]!==Q?(q=t.jsx($,{gap:"2",children:t.jsx(ve,{onClick:le,children:Q})}),e[46]=Q,e[47]=q):q=e[47];let I;e[48]!==ee||e[49]!==se||e[50]!==Z||e[51]!==q?(I=t.jsxs(Ie,{children:[O,t.jsxs($,{direction:"column",gap:"2",children:[d,ee,se,de,Z,q]})]}),e[48]=ee,e[49]=se,e[50]=Z,e[51]=q,e[52]=I):I=e[52];let ae;return e[53]!==s||e[54]!==i||e[55]!==I?(ae=t.jsx(Re,{open:s,onOpenChange:i,children:I}),e[53]=s,e[54]=i,e[55]=I,e[56]=ae):ae=e[56],ae});function Dl(){const e=Me.ctx.createOscillator();return e.type="sine",e.frequency.value=880,e}function Ml(){const e=Me.ctx.createOscillator();return e.type="sine",e.frequency.value=440,e}function _l(e){return requestAnimationFrame(e)}function Cl(e){return!e}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const kt=globalThis.jotaiAtomCache.get("D:\\github project\\新建文件夹\\amll-ttml-tool\\src\\components\\Dialogs\\notice.tsx/noticeLevelDialogAtom",Ae("noticeLevelDialog",1));kt.debugLabel="noticeLevelDialogAtom";kt.debugLabel="noticeLevelDialogAtom";const Vt=1,kl=()=>{const e=ye.c(7),[s,i]=P(kt),n=s<Vt;let o,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(Be,{children:"暂无通知"}),c=t.jsx(el,{children:"吧"}),e[0]=o,e[1]=c):(o=e[0],c=e[1]);let r;e[2]!==i?(r=t.jsxs(Ie,{children:[o,c,t.jsx(Jt,{children:t.jsx(ve,{mt:"4",onClick:()=>{i(Vt)},children:"关闭"})})]}),e[2]=i,e[3]=r):r=e[3];let l;return e[4]!==n||e[5]!==r?(l=t.jsx(Re,{open:n,children:r}),e[4]=n,e[5]=r,e[6]=l):l=e[6],l},Bl="_word_1jbq4_1",Il={word:Bl};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const Rl=J.memo(()=>{const[e,s]=P(tl),[i,n]=Ht(ll),o=zt(ze),[c,r]=J.useState("\\"),l=J.useMemo(()=>i.word.split(c),[c,i.word]),{t:x}=Ke();return t.jsx(Re,{open:e,onOpenChange:s,children:t.jsxs(Ie,{children:[t.jsx(Be,{children:x("splitWordDialog.title","拆分/替换单词")}),t.jsxs($,{direction:"column",gap:"2",children:[t.jsxs(Ce,{color:"blue",children:[t.jsx(et,{children:t.jsx(Mt,{})}),t.jsx(ke,{children:x("splitWordDialog.tip","拆分后新单词将会按自身单词字符平均分配原单词的始末时间，如有空拍则会被清除")})]}),t.jsx(M,{children:x("splitWordDialog.originalWord","拆分/替换模板")}),t.jsx(je,{value:i.word,onChange:a=>n(m=>{m.word=a.target.value})}),t.jsx(M,{mt:"4",children:x("splitWordDialog.delimiter","分隔符")}),t.jsx(je,{value:c,onChange:a=>r(a.target.value)}),t.jsx(sl,{size:"4",my:"2"}),t.jsx(M,{children:x("splitWordDialog.previewTitle","拆分预览")}),t.jsx($,{gap:"1",wrap:"wrap",mb:"4",children:l.map((a,m)=>t.jsx("span",{className:Il.word,children:a.trim()===""?t.jsx(M,{color:"gray",children:a.length>0?x("splitWordDialog.spaceCount","空格x{{count}}",{count:a.length}):x("splitWordDialog.empty","空白")}):a},`preview-word-${m}-${a}`))})]}),t.jsx(Jt,{children:t.jsx(ve,{onClick:()=>{o(a=>{const m=a.lyricLines[i.lineIndex];if(m){const h=m.words[i.wordIndex];if(h){const u=h.startTime,A=(h.endTime-u)/l.length,v=l.map((T,S)=>({...Dt(),startTime:u+A*S|0,endTime:u+A*(S+1)|0,word:T}));m.words.splice(i.wordIndex,1,...v)}}})},children:"拆分/替换"})})]})})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,s){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,s),s)}};const $l=()=>{const e=ye.c(1);let s;return e[0]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsxs(t.Fragment,{children:[t.jsx(cl,{}),t.jsx(gl,{}),t.jsx(Ll,{}),t.jsx(Rl,{}),t.jsx(Sl,{}),t.jsx(wl,{}),t.jsx(kl,{})]}),e[0]=s):s=e[0],s};export{$l as Dialogs,$l as default};
//# sourceMappingURL=index-Clxzx4au.js.map
